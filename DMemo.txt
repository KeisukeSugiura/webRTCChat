webRTCChat
-仕様-
○1.複数人でのビデオチャットを行う
2.ルーム機能をもうける
3.チャットに参加したときにビデオ画面を追加する
4.ビデオ画面は操作可能であり同期する
5.ビデオ画面の相互距離によって音量を調節する
6.一定音量を超えるとまわりを光らせる

-開発メモ-
webRTCを用いたビデオチャットには
・シグナリングサーバ
・ICEサーバ
が必要
multiAutoChat.jsはシグナリングサーバの役割を果たす
今回はICEサーバは用意しない

P2P通信に必要なのは
・SDP-ブラウザの情報
・ICE-通信経路
シグナリングサーバではこれらを相互に交換する

getVideoForRemote
pushuVideoStandBy
popVideoStandBy
pushuVideoInUse
popVideoInUse
attachVideo
detachVideo
detachAllVideo
getFirstVideoInUse
getVideoCountInUse
isLocalStreamStarted

getConnection
addConnection
getConnectionCount
isConectPossible
getConnectionIndex
deleteConnection
stopAllConnections
stopConnection
isPeerStarted

getRoomName

onOffer
onAnswer
onCandidate
sendSDP
sendCandidate

sendOffer
sendAnswer
setOffer
setAnswer

onRemoteStreamAdded
onRemoteStreamRemoved
prepareNewConnection


動的生成手順
//pushVideoStandBy->廃止
//popVideoStandBy->廃止

//attachVideoの段階でvideoを生成追加をする--idをmessage.target.fromから抽出
//dettachVideoの段階でvideoを削除する

//コネクトのタイミング
//カメラの許可はURLアクセス直後
自身のカメラのみ移動を許可する
自身のカメラ移動時に部屋全体に座標変更を伝える
//許可を取ったときに部屋に居る人にcallする

ルームスイッチをする
リスト
呼び出しボタン